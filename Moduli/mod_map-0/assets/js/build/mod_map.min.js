function ready(e){document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",function(){"interactive"===document.readyState&&e()})}function initialize(){directionsService=new google.maps.DirectionsService,directionsDisplay=new google.maps.DirectionsRenderer;var e={center:new google.maps.LatLng(c7_custom_latitude,c7_custom_longitude),zoom:c7_zoom_level,mapTypeId:google.maps.MapTypeId.ROADMAP,panControl:!0,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE}};map=new google.maps.Map(document.getElementById("mod_mapMap"),e),directionsDisplay.setMap(map),directionsDisplay.setPanel(document.getElementById("direction-output")),marker=new google.maps.Marker({position:new google.maps.LatLng(c7_custom_latitude,c7_custom_longitude),map:map,title:"More info",animation:google.maps.Animation.DROP}),google.maps.event.addListener(marker,"click",function(){document.getElementById("left-pane").hasClass("open")?(document.getElementById("left-pane").className="",document.getElementById("map-figure").className="",map.setCenter(marker.position),recenter(),google.maps.event.trigger(map,"resize")):(document.getElementById("right-pane").className="",document.getElementById("map-figure").className="",directionsDisplay.set("directions",null),document.getElementById("left-pane").className=document.getElementById("left-pane").className+"open",document.getElementById("map-figure").className=document.getElementById("map-figure").className+"left-open",map.setCenter(marker.position),recenter(),google.maps.event.trigger(map,"resize"))}),pin_location=new google.maps.LatLng(c7_custom_latitude,c7_custom_longitude)}function recenter(){setTimeout(function(){google.maps.event.trigger(map,"resize"),map.setCenter(pin_location)},10)}function getDirections(){var e=new google.maps.LatLng(my_location.lati,my_location.longi),t=pin_location,o={origin:e,destination:t,travelMode:google.maps.TravelMode.DRIVING};directionsService.route(o,function(e,t){t===google.maps.DirectionsStatus.ZERO_RESULTS?(document.getElementById("location-status").innerHTML="<p>No route available. Sorry!</p>",document.getElementById("direction-toggle").disabled=!1):t===google.maps.DirectionsStatus.OK&&(responsecoords=e.routes[0].bounds,directionsDisplay.setDirections(e),map.fitBounds(responsecoords))})}function getLocation(){var e=document.getElementById("location-status");e.innerHTML="<p>Finding your location</p>",navigator.geolocation?(document.getElementById("direction-toggle").disabled=!0,navigator.geolocation.getCurrentPosition(function(t){my_location.lati=t.coords.latitude,my_location.longi=t.coords.longitude,document.getElementById("direction-toggle").disabled=!1,e.innerHTML="",getDirections()},function(t){e.innerHTML="<p>Not able to obtain location.</p>",document.getElementById("direction-toggle").disabled=!1},{timeout:1e4})):(e.innerHTML="<p>Geolocation is not supported by this browser.</p>",e.remove())}function button_clicks(){document.getElementById("map-toggle").onclick=function(){document.getElementById("left-pane").hasClass("open")?(document.getElementById("left-pane").className="",document.getElementById("map-figure").className="",map.setCenter(marker.position),recenter(),google.maps.event.trigger(map,"resize")):(document.getElementById("right-pane").className="",document.getElementById("map-figure").className="",directionsDisplay.set("directions",null),document.getElementById("left-pane").className=document.getElementById("left-pane").className+"open",document.getElementById("map-figure").className=document.getElementById("map-figure").className+"left-open",map.setCenter(marker.position),recenter(),google.maps.event.trigger(map,"resize"))},document.getElementById("direction-toggle").onclick=function(){document.getElementById("right-pane").hasClass("open")?(document.getElementById("right-pane").className="",document.getElementById("map-figure").className="",directionsDisplay.set("directions",null),map.setCenter(marker.position),recenter(),google.maps.event.trigger(map,"resize")):(document.getElementById("left-pane").className="",document.getElementById("map-figure").className="",document.getElementById("right-pane").className=document.getElementById("right-pane").className+"open",document.getElementById("map-figure").className=document.getElementById("map-figure").className+"right-open",google.maps.event.trigger(map,"resize"),my_location.lati?getDirections():getLocation())}}function change_direction_type(){document.getElementById("driving-toggle").onclick=function(){var e=new google.maps.LatLng(my_location.lati,my_location.longi),t=pin_location,o={origin:e,destination:t,travelMode:google.maps.TravelMode.DRIVING};directionsService.route(o,function(e,t){t===google.maps.DirectionsStatus.ZERO_RESULTS?(document.getElementById("location-status").innerHTML="<p>No route available. Sorry!</p>",document.getElementById("direction-toggle").disabled=!1):t===google.maps.DirectionsStatus.OK&&(responsecoords=e.routes[0].bounds,directionsDisplay.setDirections(e),map.fitBounds(responsecoords))})},document.getElementById("walking-toggle").onclick=function(){var e=new google.maps.LatLng(my_location.lati,my_location.longi),t=pin_location,o={origin:e,destination:t,travelMode:google.maps.TravelMode.WALKING};directionsService.route(o,function(e,t){t===google.maps.DirectionsStatus.ZERO_RESULTS?(document.getElementById("location-status").innerHTML="<p>No route available. Sorry!</p>",document.getElementById("direction-toggle").disabled=!1):t===google.maps.DirectionsStatus.OK&&(responsecoords=e.routes[0].bounds,directionsDisplay.setDirections(e),map.fitBounds(responsecoords))})},document.getElementById("cycling-toggle").onclick=function(){var e=new google.maps.LatLng(my_location.lati,my_location.longi),t=pin_location,o={origin:e,destination:t,travelMode:google.maps.TravelMode.BICYCLING};directionsService.route(o,function(e,t){t===google.maps.DirectionsStatus.ZERO_RESULTS?(document.getElementById("location-status").innerHTML="<p>No route available. Sorry!</p>",document.getElementById("direction-toggle").disabled=!1):t===google.maps.DirectionsStatus.OK&&(responsecoords=e.routes[0].bounds,directionsDisplay.setDirections(e),map.fitBounds(responsecoords))})},document.getElementById("transit-toggle").onclick=function(){var e=new google.maps.LatLng(my_location.lati,my_location.longi),t=pin_location,o={origin:e,destination:t,travelMode:google.maps.TravelMode.TRANSIT};directionsService.route(o,function(e,t){t===google.maps.DirectionsStatus.ZERO_RESULTS?(document.getElementById("location-status").innerHTML="<p>No route available. Sorry!</p>",document.getElementById("direction-toggle").disabled=!1):t===google.maps.DirectionsStatus.OK&&(responsecoords=e.routes[0].bounds,directionsDisplay.setDirections(e),map.fitBounds(responsecoords))})}}Element.prototype.hasClass=function(e){return this.className&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(this.className)};var my_location=[],varmarker="",directionsDisplay="",directionsService="",map="",response_coords="";window.onresize=function(e){document.getElementById("map-figure").hasClass("right-open")?(google.maps.event.trigger(map,"resize"),responsecoords&&map.fitBounds(responsecoords)):(google.maps.event.trigger(map,"resize"),map.setCenter(marker.position))},ready(function(){button_clicks(),change_direction_type()});